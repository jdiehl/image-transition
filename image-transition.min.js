window.ImageTransition=function(){"use strict";function t(t,e){var i=new Image;i.src=t,i.addEventListener("load",e)}function e(t,e,i,o,n){var s=document.createElement("div");return s.classList.add("tile"),s.style.position="absolute",s.style["background-image"]=n,s.style.left=t*i+"px",s.style.top=e*o+"px",s.style.width=i+"px",s.style.height=o+"px",s.style["background-position"]=-t*i+"px "+-e*o+"px",s}function i(i,o,n,s){function a(t){f.push(t),f.length===c&&(i.style["background-image"]=u,f.forEach(i.removeChild.bind(i)),s&&s())}function r(t,o){var s=Math.round(i.offsetWidth/n.cols),a=Math.round(i.offsetHeight/n.rows),r=t%n.cols,l=Math.floor(t/n.cols),f=e(r,l,s,a,d),c=e(r,l,s,a,u);i.appendChild(f),setTimeout(function(){f.style.animation="image-transition-"+n.transition+"-out "+n.duration+"ms",c.style.animation="image-transition-"+n.transition+"-in "+n.duration+"ms",i.appendChild(c)},n.delay(r,l)),c.addEventListener("animationend",function(){i.removeChild(f),o(c)})}"string"==typeof i&&(i=document.querySelector(i));var l=window.getComputedStyle(i),d=l["background-image"]||"url("+l.src+")",u="url("+o+")",f=[];n.tileSize&&(n.tiles=Math.round(Math.max(i.offsetWidth,i.offsetHeight)/n.tileSize)),n.tiles&&(i.offsetWidth>i.offsetHeight?(n.cols=n.tiles,n.rows=Math.round(n.tiles/i.offsetWidth*i.offsetHeight)):(n.rows=n.tiles,n.cols=Math.round(n.tiles/i.offsetWidth*i.offsetHeight))),n.cols=n.cols||1,n.rows=n.rows||1;var c=n.cols*n.rows;n.duration=n.duration||1e3,n.delay=n.delay||function(t,e){return 20*(t+e)},t(o,function(){for(var t=0;c>t;t++)r(t,a);i.style["background-image"]="none"})}function o(t){return function(e,o,n){i(e,o,t,n)}}return{transition:i,mosaic:o({tiles:10,duration:500,transition:"rotatey"})}}(window);